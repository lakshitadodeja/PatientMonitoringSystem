<html>
<body>
	<form>
		<input type="file" name="file" id="file">
		<br>
	</form>
		<button onclick="readFile();">Simulate</button
		<script src="https://code.jquery.com/jquery-3.2.1.js"></script>
		<script src="https://www.gstatic.com/firebasejs/4.8.2/firebase.js"></script>
		<script src="js/index.js"></script>
		<script>
			function readFile()
			{
				var index = 1;
				var x=document.getElementById('file').files[0];
				
				var reader = new FileReader();
			    reader.onload = function(progressEvent){
				var lines = this.result.split('\r\n');
				var line=0;
				window.intervalId = setInterval(function() {
					var count = 0;
					var index = 1;
						while(count<10){
							var map=lines[line].split(",");
							  var object={
									patient_id: map[0],
									heartbeat: map[1],
									bp_high: map[2],
									bp_low: map[3],
									temperature: map[4]
									};
									var rootRef = firebase.database().ref();
									var storesRef = rootRef.child('patient_data/'+index);
									storesRef.set({
										"patient_id": object.patient_id,
										"heartbeat": object.heartbeat,
										"bp_high":  object.bp_high,
										"bp_low": object.bp_low,
										"temperature": object.temperature
								});
								count++;
								index++;
								line++;
							}
					}, 30000);
			  };
			  reader.readAsText(x);
			}
		</script>
		</body>
</html>